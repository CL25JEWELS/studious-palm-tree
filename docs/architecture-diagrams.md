# Audio Engine Architecture Diagrams

Quick visual reference for the LoopPad audio engine architecture.

## Table of Contents
- [Audio Graph Overview](#audio-graph-overview)
- [Latency Budget Visual](#latency-budget-visual)
- [UI Layout Wireframes](#ui-layout-wireframes)
- [Signal Flow Diagram](#signal-flow-diagram)

---

## Audio Graph Overview

### Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        LOOPPAD AUDIO ENGINE                           â”‚
â”‚                     (Real-time Web Audio System)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER INPUT LAYER
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Keyboard    â”‚  â”‚    Mouse     â”‚  â”‚   MIDI In    â”‚
â”‚   Events     â”‚  â”‚   Events     â”‚  â”‚   (Optional) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   Input Event Handler    â”‚
          â”‚   - Debouncing           â”‚
          â”‚   - Velocity detection   â”‚
          â”‚   - Timing precision     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AUDIO CONTEXT                               â”‚
â”‚  AudioContext({ latencyHint: 'interactive', sampleRate: 48k })â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“               â†“               â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Pad 1  â”‚     â”‚ Pad 2  â”‚ ... â”‚ Pad 16 â”‚
    â”‚ Engine â”‚     â”‚ Engine â”‚     â”‚ Engine â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚               â”‚
         â”‚  [Each pad has 32-voice pool]
         â”‚               â”‚               â”‚
         â†“               â†“               â†“
    [Voice 1-32]    [Voice 1-32]   [Voice 1-32]
         â”‚               â”‚               â”‚
         â”‚  [Per-voice signal chain:    â”‚
         â”‚   Source â†’ Envelope â†’ Filter â”‚
         â”‚   â†’ Pan â†’ Effects]           â”‚
         â”‚               â”‚               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Master Mixer   â”‚
              â”‚   (16 channels)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Master Effects  â”‚
              â”‚  - Compressor    â”‚
              â”‚  - Limiter       â”‚
              â”‚  - Reverb (opt)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Analyser Node   â”‚
              â”‚  (Visualization) â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Destination    â”‚
              â”‚  (Audio Output)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Latency Budget Visual

### 10ms Target Breakdown (Interactive Buffer: 128 samples @ 48kHz)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LATENCY TIMELINE (0-10ms)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

0ms â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 10ms
â”‚                                                                 â”‚
â”œâ”€â”€â”¤  Input Latency (0.7-2.8ms)
â”‚  â””â”€ Keyboard event â†’ JS handler â†’ Voice allocation
â”‚
â”œâ”€â”€â”€â”€â”¤  Processing Latency (0.8-2.3ms)
â”‚    â””â”€ Node graph computation â†’ DSP processing
â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Buffer Latency (4.2-8.8ms)  â† LARGEST COMPONENT
â”‚          â””â”€ AudioContext buffer + Output buffer + Driver
â”‚
â””â”€â”¤  Output Latency (0.4-1.5ms)
   â””â”€ DAC conversion + Hardware propagation

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TOTAL: 6.1ms (Best Case) to 15.4ms (Worst Case)
TARGET: < 10ms for professional real-time performance
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OPTIMIZATION ZONES:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Input: < 1ms     â”‚ â† Pre-allocate voices, optimized handlers
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Processing: < 2msâ”‚ â† Minimize node count, efficient graph
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Buffer: < 5ms    â”‚ â† Use 'interactive' hint, 128 samples
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Output: < 2ms    â”‚ â† Wired audio, ASIO/CoreAudio drivers
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Buffer Size Impact

```
Sample Rate: 48000 Hz

Buffer Size     Latency      Quality      Use Case
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  128 samples   2.67ms      â˜…â˜…â˜…â˜…â˜…        Professional - RECOMMENDED
  256 samples   5.33ms      â˜…â˜…â˜…â˜…â˜†        Good - Fallback
  512 samples   10.67ms     â˜…â˜…â˜…â˜†â˜†        Acceptable - Budget devices
  1024 samples  21.33ms     â˜…â˜…â˜†â˜†â˜†        Poor - Noticeable delay

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RULE OF THUMB:                                            â”‚
â”‚  Latency (ms) = (Buffer Size / Sample Rate) Ã— 1000         â”‚
â”‚                                                            â”‚
â”‚  For 128 samples @ 48kHz:                                  â”‚
â”‚  Latency = (128 / 48000) Ã— 1000 = 2.67ms                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## UI Layout Wireframes

### Desktop Layout (>1024px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸµ LOOPPAD          [â–¶ Play] BPM:120  [Settings] [Help]       â”‚ â† Header (60px)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                       â”‚              â”‚
â”‚ SIDEBAR  â”‚           PAD GRID (4Ã—4)             â”‚ MASTER MIX   â”‚
â”‚          â”‚                                       â”‚              â”‚
â”‚ Presets  â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ P1 â”‚ â”‚ P2 â”‚ â”‚ P3 â”‚ â”‚ P4 â”‚       â”‚ â”‚ Master   â”‚ â”‚
â”‚ â€¢ Kicks  â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜       â”‚ â”‚ Fader    â”‚ â”‚
â”‚ â€¢ Snares â”‚                                       â”‚ â”‚   â•‘      â”‚ â”‚
â”‚ â€¢ Hi-Hat â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”       â”‚ â”‚   â•‘      â”‚ â”‚
â”‚ â€¢ Bass   â”‚  â”‚ P5 â”‚ â”‚ P6 â”‚ â”‚ P7 â”‚ â”‚ P8 â”‚       â”‚ â”‚   â•‘      â”‚ â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜       â”‚ â””â”€â”€â”€â•‘â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚                                       â”‚              â”‚
â”‚ Settings â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”       â”‚ Compressor   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚ P9 â”‚ â”‚P10 â”‚ â”‚P11 â”‚ â”‚P12 â”‚       â”‚ [â–¬â–¬â–¬â–¬â—‹â”€â”€â”€]   â”‚
â”‚ â€¢ Audio  â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜       â”‚              â”‚
â”‚ â€¢ MIDI   â”‚                                       â”‚ Limiter      â”‚
â”‚ â€¢ Theme  â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”       â”‚ [â–¬â–¬â–¬â–¬â–¬â—‹â”€â”€]   â”‚
â”‚          â”‚  â”‚P13 â”‚ â”‚P14 â”‚ â”‚P15 â”‚ â”‚P16 â”‚       â”‚              â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜       â”‚ VU Meters    â”‚
â”‚          â”‚                                       â”‚ L â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ     â”‚
â”‚  [Help]  â”‚  Q W E R | A S D F | Z X C V        â”‚ R â–ˆâ–ˆâ–ˆâ–ˆâ–Œ      â”‚
â”‚          â”‚  Y U I O | H J K L | N M , .        â”‚              â”‚
â”‚          â”‚                                       â”‚ [Export WAV] â”‚
â”‚          â”‚                                       â”‚              â”‚
â”‚ (240px)  â”‚         (Flexible width)              â”‚   (280px)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pad Detail View (Modal/Drawer)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PAD 1: KICK DRUM                            [X] Close â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  SOURCE                                          â”‚ â”‚
â”‚  â”‚  â—‹ Sample  â— Oscillator                         â”‚ â”‚
â”‚  â”‚  Wave: [Sine â–¼]  Frequency: [80 Hz]             â”‚ â”‚
â”‚  â”‚  [Upload Sample...]                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ENVELOPE (ADSR)                                 â”‚ â”‚
â”‚  â”‚                                                  â”‚ â”‚
â”‚  â”‚      â•±â•²                                          â”‚ â”‚
â”‚  â”‚     â•±  â•²___                                      â”‚ â”‚
â”‚  â”‚    â•±       â•²___                                  â”‚ â”‚
â”‚  â”‚   â•±            â•²___                              â”‚ â”‚
â”‚  â”‚                                                  â”‚ â”‚
â”‚  â”‚  Attack:  [â–¬â—‹â”€â”€â”€â”€] 10ms                         â”‚ â”‚
â”‚  â”‚  Decay:   [â–¬â–¬â—‹â”€â”€â”€] 100ms                        â”‚ â”‚
â”‚  â”‚  Sustain: [â–¬â–¬â–¬â—‹â”€â”€] 60%                          â”‚ â”‚
â”‚  â”‚  Release: [â–¬â–¬â—‹â”€â”€â”€] 200ms                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  FILTER                                          â”‚ â”‚
â”‚  â”‚  Type: [Lowpass â–¼]                               â”‚ â”‚
â”‚  â”‚  Cutoff:    [â–¬â–¬â–¬â–¬â–¬â—‹] 500 Hz                     â”‚ â”‚
â”‚  â”‚  Resonance: [â–¬â—‹â”€â”€â”€â”€] 2.0                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  EFFECTS                                         â”‚ â”‚
â”‚  â”‚  â˜‘ Distortion  Drive:[â–¬â–¬â—‹â”€] Mix:[â–¬â—‹â”€â”€]          â”‚ â”‚
â”‚  â”‚  â˜ Delay       Time:[â”€â”€â”€â—‹] Feedback:[â”€â”€â—‹]       â”‚ â”‚
â”‚  â”‚  â˜ Reverb      Size:[â”€â”€â”€â—‹] Mix:[â”€â”€â—‹]            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  OUTPUT                                          â”‚ â”‚
â”‚  â”‚  Volume: [â–¬â–¬â–¬â–¬â—‹â”€â”€] 80%                          â”‚ â”‚
â”‚  â”‚  Pan:    [â”€â”€â”€â—‹â”€â”€â”€] Center                       â”‚ â”‚
â”‚  â”‚  [MUTE]  [SOLO]                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚               [Apply]  [Reset]  [Save Preset]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile Layout (<768px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸµ LOOPPAD    [â‰¡] â”‚ â† Hamburger menu
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    â”‚
â”‚ [â–¶] [â¹] BPM: 120  â”‚ â† Transport controls
â”‚                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Pad1 â”‚â”‚ Pad2 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Pad3 â”‚â”‚ Pad4 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Pad5 â”‚â”‚ Pad6 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Pad7 â”‚â”‚ Pad8 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â”‚
â”‚  [Show More Pads]  â”‚ â† Scroll for Pads 9-16
â”‚                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–² Master Controls  â”‚ â† Swipe-up drawer
â”‚ Vol: [â–¬â–¬â–¬â—‹â”€â”€] 75%  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Signal Flow Diagram

### Single Pad Voice Processing

```
TRIGGER EVENT
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VOICE ALLOCATION                                        â”‚
â”‚ â€¢ Get free voice from pool (or steal oldest)            â”‚
â”‚ â€¢ Initialize with pad parameters                        â”‚
â”‚ â€¢ Schedule start time: audioContext.currentTime + 0ms   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [1] SOURCE                                              â”‚
â”‚                                                         â”‚
â”‚  Option A: AudioBufferSourceNode                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ buffer: AudioBuffer               â”‚                 â”‚
â”‚  â”‚ playbackRate: 1.0 (440Hz â†’ 880Hz) â”‚                 â”‚
â”‚  â”‚ loop: false                        â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                         â”‚
â”‚  Option B: OscillatorNode                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ type: 'sine'                       â”‚                 â”‚
â”‚  â”‚ frequency: 440 (A4)                â”‚                 â”‚
â”‚  â”‚ detune: 0                          â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [2] ENVELOPE (GainNode)                                 â”‚
â”‚                                                         â”‚
â”‚  Time (ms)  0    10   110  310     510                 â”‚
â”‚  Gain       â”‚     â”‚    â”‚    â”‚       â”‚                   â”‚
â”‚  1.0        â”‚    â•±â•²    â”‚    â”‚       â”‚                   â”‚
â”‚  0.8        â”‚   â•±  â•²___â”‚____|       â”‚                   â”‚
â”‚  0.6        â”‚  â•±       â””â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚  0.4        â”‚ â•±                 â”‚   â”‚                   â”‚
â”‚  0.2        â”‚â•±                  â”‚   â•²                   â”‚
â”‚  0.0  â”€â”€â”€â”€â”€â”€â”˜                   â”‚    â•²_____            â”‚
â”‚         â”‚    A    D      S      â”‚      R                â”‚
â”‚         â”‚<-10ms                 â”‚<-200ms                â”‚
â”‚                                                         â”‚
â”‚  Attack:  gainNode.gain.linearRampToValueAtTime(...)   â”‚
â”‚  Decay:   gainNode.gain.exponentialRampToValueAtTime...â”‚
â”‚  Sustain: Hold level until note off                     â”‚
â”‚  Release: gainNode.gain.exponentialRampToValueAtTime... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [3] FILTER (BiquadFilterNode)                           â”‚
â”‚                                                         â”‚
â”‚  Frequency Response:                                    â”‚
â”‚  Gain (dB)                                              â”‚
â”‚    0  â”€â”€â”€â”€â”€â”€â”€â”€â”€â•²                                        â”‚
â”‚              â”‚  â•²                                       â”‚
â”‚   -20       â”‚   â•²___                                    â”‚
â”‚            â”‚       â•²___                                 â”‚
â”‚   -40     â”‚            â•²______                          â”‚
â”‚         â”‚                     â•²______                   â”‚
â”‚        20  100  500 1k  5k 10k  20kHz                   â”‚
â”‚                  â†‘                                      â”‚
â”‚            Cutoff: 500Hz                                â”‚
â”‚            Q (Resonance): 2.0                           â”‚
â”‚            Type: lowpass                                â”‚
â”‚                                                         â”‚
â”‚  filter.frequency.value = 500;                          â”‚
â”‚  filter.Q.value = 2.0;                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [4] PANNER (StereoPannerNode)                           â”‚
â”‚                                                         â”‚
â”‚  Stereo Field:                                          â”‚
â”‚                                                         â”‚
â”‚    L â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ C â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ R                        â”‚
â”‚   -1.0          0.0          +1.0                       â”‚
â”‚                                                         â”‚
â”‚    Pan Value: -0.5 (Left of center)                     â”‚
â”‚                                                         â”‚
â”‚    Equal-power panning law:                             â”‚
â”‚    L_gain = cos(Ï€/4 * (pan + 1))                        â”‚
â”‚    R_gain = sin(Ï€/4 * (pan + 1))                        â”‚
â”‚                                                         â”‚
â”‚  panner.pan.value = -0.5;                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [5] EFFECTS (Optional Chain)                            â”‚
â”‚                                                         â”‚
â”‚  Distortion (WaveShaperNode)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ curve: Float32Array (tanh)      â”‚                   â”‚
â”‚  â”‚ oversample: '4x'                 â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚         â”‚                                               â”‚
â”‚         â†“                                               â”‚
â”‚  Delay (DelayNode + Feedback)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ delayTime: 0.25s (quarter note) â”‚                   â”‚
â”‚  â”‚ feedback: 0.3 (30%)             â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚         â”‚                                               â”‚
â”‚         â†“                                               â”‚
â”‚  Dry/Wet Mix (GainNode)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ dry: 0.7 | wet: 0.3             â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [6] PAD OUTPUT (GainNode)                               â”‚
â”‚                                                         â”‚
â”‚  â€¢ Volume control: 0-1.0                                â”‚
â”‚  â€¢ Mute: multiply by 0                                  â”‚
â”‚  â€¢ Solo: mute all other pads                            â”‚
â”‚                                                         â”‚
â”‚  padGain.gain.value = 0.8 * (isMuted ? 0 : 1);         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
  TO MASTER BUS
```

### Master Bus Processing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MASTER MIXER BUS (16 inputs)                            â”‚
â”‚                                                         â”‚
â”‚  Pad 1 â”€â”€â”€â”€â”                                            â”‚
â”‚  Pad 2 â”€â”€â”€â”€â”¤                                            â”‚
â”‚  Pad 3 â”€â”€â”€â”€â”¤                                            â”‚
â”‚     ...    â”œâ”€â”€â†’ [Sum to Mono/Stereo]                    â”‚
â”‚  Pad 14â”€â”€â”€â”€â”¤                                            â”‚
â”‚  Pad 15â”€â”€â”€â”€â”¤                                            â”‚
â”‚  Pad 16â”€â”€â”€â”€â”˜                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MASTER COMPRESSOR (DynamicsCompressorNode)              â”‚
â”‚                                                         â”‚
â”‚  Input Signal:    Output Signal:                        â”‚
â”‚  â”‚                â”‚                                     â”‚
â”‚  â”‚       â•±        â”‚      â•±â”€â”€                            â”‚
â”‚  â”‚      â•±         â”‚     â•±                               â”‚
â”‚  â”‚     â•±          â”‚    â•±                                â”‚
â”‚  â”‚    â•±           â”‚   â•±                                 â”‚
â”‚  â”‚___â•±____________â”‚__â•±___ Threshold: -24dB              â”‚
â”‚                                                         â”‚
â”‚  â€¢ Threshold: -24 dB                                    â”‚
â”‚  â€¢ Ratio: 4:1                                           â”‚
â”‚  â€¢ Attack: 3ms                                          â”‚
â”‚  â€¢ Release: 250ms                                       â”‚
â”‚  â€¢ Knee: 30 (soft knee)                                 â”‚
â”‚                                                         â”‚
â”‚  Purpose: Even out dynamics, prevent clipping           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MASTER LIMITER (DynamicsCompressorNode)                 â”‚
â”‚                                                         â”‚
â”‚  â€¢ Threshold: -1.0 dB (just below 0dB)                  â”‚
â”‚  â€¢ Ratio: 20:1 (hard limiting)                          â”‚
â”‚  â€¢ Attack: 0ms (instant)                                â”‚
â”‚  â€¢ Release: 100ms                                       â”‚
â”‚                                                         â”‚
â”‚  Purpose: Prevent clipping, maximize loudness           â”‚
â”‚           Acts as "safety net" for output               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ANALYSER NODE (for visualization only)                  â”‚
â”‚                                                         â”‚
â”‚  â€¢ FFT Size: 2048                                       â”‚
â”‚  â€¢ Smoothing: 0.8                                       â”‚
â”‚  â€¢ Does NOT affect audio signal                         â”‚
â”‚  â€¢ Used for: VU meters, spectrum analyzer               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DESTINATION (AudioDestinationNode)                      â”‚
â”‚                                                         â”‚
â”‚  â€¢ Connects to physical audio hardware                  â”‚
â”‚  â€¢ Sample rate: 48000 Hz                                â”‚
â”‚  â€¢ Channels: 2 (stereo)                                 â”‚
â”‚  â€¢ Final audio output to speakers/headphones            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Interaction Flow

### User Triggers Pad â†’ Audio Output

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTERACTION FLOW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. USER ACTION
   [User presses "Q" key or clicks Pad 1]
         â”‚
         â†“
2. INPUT HANDLER (< 1ms)
   â€¢ Capture event
   â€¢ Determine velocity (0.0-1.0)
   â€¢ Map to pad ID
   â€¢ Get current audio time
         â”‚
         â†“
3. PAD ENGINE
   â€¢ Check if pad is muted
   â€¢ Get pad configuration (envelope, filter, effects)
   â€¢ Allocate voice from voice pool
         â”‚
         â†“
4. VOICE POOL (Pre-allocated, instant)
   â€¢ Find free voice OR steal oldest
   â€¢ Initialize voice with parameters
   â€¢ Schedule audio nodes
         â”‚
         â†“
5. AUDIO GRAPH (2-5ms buffer latency)
   â€¢ Source node starts playback
   â€¢ Signal flows through chain
   â€¢ Each node processes in real-time
         â”‚
         â†“
6. MASTER BUS
   â€¢ Mix all active pad signals
   â€¢ Apply master compression
   â€¢ Apply master limiting
         â”‚
         â†“
7. OUTPUT (< 2ms)
   â€¢ DAC converts digital â†’ analog
   â€¢ Signal sent to audio hardware
   â€¢ User hears sound
         â”‚
         â†“
   TOTAL TIME: ~6-10ms (imperceptible delay)

8. UI UPDATE (Separate, non-blocking)
   â€¢ Pad visual feedback (glow/pulse)
   â€¢ VU meter animation
   â€¢ Waveform display update
   â€¢ Runs at 60 FPS via requestAnimationFrame
```

---

## Implementation Priority

### Phase 1: Core (Weeks 1-2) â­â­â­ CRITICAL
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AudioContext initialization  â”‚
â”‚ Voice Pool (32 voices)       â”‚
â”‚ Basic sampler (play samples) â”‚
â”‚ Envelope (ADSR)              â”‚
â”‚ Simple UI (8 pads)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 2: Processing (Weeks 3-4) â­â­â­ HIGH
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BiquadFilter per pad         â”‚
â”‚ StereoPanner                 â”‚
â”‚ Master mixer bus             â”‚
â”‚ Master compressor/limiter    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 3: UI/UX (Weeks 5-6) â­â­ MEDIUM
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Full UI components           â”‚
â”‚ Pad controls drawer          â”‚
â”‚ Visual feedback              â”‚
â”‚ Responsive design            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 4: Advanced (Weeks 7-8) â­ LOW
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Effects (delay, reverb)      â”‚
â”‚ MIDI support                 â”‚
â”‚ Sample upload                â”‚
â”‚ Preset system                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Performance Metrics Dashboard

### Target KPIs

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PERFORMANCE DASHBOARD                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ âš¡ LATENCY                                          â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚ End-to-End:     6.5ms  âœ“ TARGET: < 10ms            â”‚
â”‚ Input:          0.8ms  âœ“ TARGET: < 1ms             â”‚
â”‚ Processing:     1.2ms  âœ“ TARGET: < 2ms             â”‚
â”‚ Buffer:         4.2ms  âœ“ TARGET: < 5ms             â”‚
â”‚ Output:         0.3ms  âœ“ TARGET: < 2ms             â”‚
â”‚                                                     â”‚
â”‚ ğŸ’» CPU & MEMORY                                     â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚ CPU Usage:        18%  âœ“ TARGET: < 30%             â”‚
â”‚ Memory:          42MB  âœ“ TARGET: < 100MB           â”‚
â”‚ Voice Pool:   12/32    âœ“ Allocated: 32             â”‚
â”‚                                                     â”‚
â”‚ ğŸµ AUDIO QUALITY                                    â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚ Sample Rate:   48000Hz âœ“ Professional              â”‚
â”‚ Bit Depth:   32-bit FP âœ“ Maximum quality           â”‚
â”‚ Channels:     2 (Stereo) âœ“                         â”‚
â”‚ Dropouts:            0 âœ“ No glitches               â”‚
â”‚                                                     â”‚
â”‚ ğŸ¨ UI PERFORMANCE                                   â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚ Frame Rate:      60fps âœ“ TARGET: 60fps             â”‚
â”‚ Input Response:    2ms âœ“ Instant feedback          â”‚
â”‚ Paint Time:      8.2ms âœ“ TARGET: < 16ms            â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend: âœ“ = Meeting target | âš ï¸ = Warning | âŒ = Critical
```

---

## Summary

This architecture provides:

âœ… **Sub-10ms latency** via optimized audio graph and pre-allocated voices  
âœ… **8-16 pad support** with independent signal chains  
âœ… **Professional audio quality** with 48kHz/32-bit processing  
âœ… **Scalable design** from basic sampler to full DAW features  
âœ… **Modern UI** with responsive design and visual feedback  
âœ… **Real-time performance** with zero dropouts and glitches  

For detailed implementation guide, see [audio-engine-blueprint.md](./audio-engine-blueprint.md)
